# Storybook Addon Storybook Discussion

Leave comments for components and MDX documents based on [addon-kit](https://github.com/storybookjs/addon-kit), comments are saved on [supabase](https://supabase.com/) database.

### Usage

#### Installation

```
npm install -D storybook-addon-discussion
```

#### Configuration

```ts
// .storybook/main.ts

const config: StorybookConfig = {
  ...
  addons: [
    ...
    "storybook-addon-discussion"
  ],
  ...
};
export default config;
```

```ts
// .storybook/preview.ts

import type { Preview } from "@storybook/react";

const preview: Preview = {
  parameters: {
    ...
    discussion: {
      supabase: {
        url: "SUPABASE_PROJECT_URL", // example: https://YOUR_PROJECT_UNIQUE_ID.supabase.co
        secret: "PROJECT_API_PUBLIC_KEY",
      },
    },
  },
};

export default preview;
```

```sql
-- Create Query for comments table (comments_v1)
-- Execute this query on Supabase SQL Editor

create table
  comments_v1 (
    id bigint generated by default as identity primary key,
    author varchar(50) not null,
    comment text not null,
    storyId varchar(150) not null,
    createdAt timestamp not null
  );
```

#### Playground

This playground is react project based on Vite for the testing the main package `storybook-addon-discussion`

Basically, the main package installed via `pnpm install file:../`.

If you want to make any update in the main package and want to test it, you have to follow the below steps

- navigate to the main package directory via the terminal
- run `pnpm build`
- navigate to the playground directory
- run `pnpm install`
- then run the playground by run `pnpm storybook`
